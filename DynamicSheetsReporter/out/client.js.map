{"version":3,"file":"client.js","mappings":";;;;;;;;;;;AAAa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,iBAAiB;AACjB;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;;;;;;UCvBA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;;;;;;ACtBa;AACb;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,oBAAoB,mBAAO,CAAC,gEAAsB;AAClD;AACA;AACA;AACA,8CAA8C,GAAG;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE,sBAAsB;AACvF;AACA;AACA;AACA;AACA;AACA,kDAAkD,EAAE;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE,gBAAgB;AACnF;AACA;AACA;AACA,mDAAmD,UAAU;AAC7D;AACA;AACA;AACA;AACA,iDAAiD,EAAE;AACnD;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,wBAAwB,cAAc;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,UAAU;AAChE;AACA;AACA;AACA;AACA,kDAAkD,EAAE;AACpD;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,EAAE;AACjD;AACA;AACA,KAAK;AACL;AACA","sources":["webpack://ClientBundle/./src/client/services/ApiClient.ts","webpack://ClientBundle/webpack/bootstrap","webpack://ClientBundle/./src/client/main.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ApiClient = void 0;\nfunction run(name, ...args) {\n    return new Promise((resolve, reject) => {\n        google.script.run\n            .withSuccessHandler((res) => resolve(res))\n            .withFailureHandler((err) => reject(err))[name](...args);\n    });\n}\nexports.ApiClient = {\n    ping() {\n        return run('ping');\n    },\n    getUserSettings() {\n        return run('getUserSettings');\n    },\n    saveUserSettings(req) {\n        return run('saveUserSettings', req);\n    },\n    generateContent(req) {\n        return run('generateContentProxy', req);\n    }\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","\"use strict\";\n// Client bootstrap and simple UI wiring\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ApiClient_1 = require(\"./services/ApiClient\");\nfunction byId(id) {\n    const el = document.getElementById(id);\n    if (!el)\n        throw new Error(`element not found: ${id}`);\n    return el;\n}\nasync function init() {\n    const apiKeyInput = byId('apiKey');\n    const apiKeyMasked = byId('apiKeyMasked');\n    const modelSel = byId('model');\n    const localeInput = byId('locale');\n    const tzInput = byId('tz');\n    const saveBtn = byId('saveBtn');\n    const saveStatus = byId('saveStatus');\n    const pingBtn = byId('pingBtn');\n    const pingResult = byId('pingResult');\n    // Gemini minimal test UI\n    let gemBtn = null;\n    let gemPrompt = null;\n    let gemResult = null;\n    try {\n        gemBtn = byId('gemBtn');\n        gemPrompt = byId('gemPrompt');\n        gemResult = byId('gemResult');\n    }\n    catch (_) {\n        // optional section not present\n    }\n    // load current settings\n    try {\n        const settings = await ApiClient_1.ApiClient.getUserSettings();\n        apiKeyMasked.textContent = settings.hasApiKey ? `保存済み: ${settings.apiKeyMasked}` : '未保存';\n        modelSel.value = settings.model;\n        localeInput.value = settings.locale || 'ja-JP';\n        tzInput.value = settings.timezone || 'Asia/Tokyo';\n    }\n    catch (e) {\n        saveStatus.textContent = `設定の取得に失敗しました: ${e}`;\n        saveStatus.className = 'error';\n    }\n    saveBtn.addEventListener('click', async () => {\n        try {\n            saveBtn.disabled = true;\n            saveStatus.textContent = '保存中...';\n            const req = {\n                model: modelSel.value,\n                locale: localeInput.value,\n                timezone: tzInput.value,\n            };\n            if (apiKeyInput.value && apiKeyInput.value.trim().length > 0) {\n                req.apiKeyPlain = apiKeyInput.value.trim();\n            }\n            const res = await ApiClient_1.ApiClient.saveUserSettings(req);\n            if (res.ok) {\n                saveStatus.textContent = '保存しました';\n                saveStatus.className = 'ok';\n                const st = res.settings;\n                apiKeyMasked.textContent = st.hasApiKey ? `保存済み: ${st.apiKeyMasked}` : '未保存';\n                apiKeyInput.value = '';\n            }\n            else {\n                saveStatus.textContent = `保存に失敗: ${res.error}`;\n                saveStatus.className = 'error';\n            }\n        }\n        catch (e) {\n            saveStatus.textContent = `保存中にエラー: ${e}`;\n            saveStatus.className = 'error';\n        }\n        finally {\n            saveBtn.disabled = false;\n        }\n    });\n    if (gemBtn && gemPrompt && gemResult) {\n        gemBtn.addEventListener('click', async () => {\n            var _a, _b, _c, _d, _e, _f;\n            const prompt = gemPrompt.value || 'こんにちは';\n            gemResult.textContent = '生成中...';\n            gemResult.className = 'mono';\n            try {\n                const req = {\n                    model: byId('model').value || 'gemini-2.5-flash',\n                    contents: [\n                        { role: 'user', parts: [{ text: prompt }] }\n                    ]\n                };\n                const res = await ApiClient_1.ApiClient.generateContent(req);\n                if (res.ok) {\n                    const txt = ((_f = (_e = (_d = (_c = (_b = (_a = res.data) === null || _a === void 0 ? void 0 : _a.candidates) === null || _b === void 0 ? void 0 : _b[0]) === null || _c === void 0 ? void 0 : _c.content) === null || _d === void 0 ? void 0 : _d.parts) === null || _e === void 0 ? void 0 : _e[0]) === null || _f === void 0 ? void 0 : _f.text) || '(empty)';\n                    gemResult.textContent = txt;\n                    gemResult.className = 'ok mono';\n                }\n                else {\n                    gemResult.textContent = `error: ${res.error}`;\n                    gemResult.className = 'error mono';\n                }\n            }\n            catch (e) {\n                gemResult.textContent = `error: ${e}`;\n                gemResult.className = 'error mono';\n            }\n        });\n    }\n    pingBtn.addEventListener('click', async () => {\n        pingResult.textContent = 'ping...';\n        try {\n            const res = await ApiClient_1.ApiClient.ping();\n            pingResult.textContent = res;\n            pingResult.className = 'ok mono';\n        }\n        catch (e) {\n            pingResult.textContent = `error: ${e}`;\n            pingResult.className = 'error mono';\n        }\n    });\n}\ndocument.addEventListener('DOMContentLoaded', init);\n"],"names":[],"sourceRoot":""}